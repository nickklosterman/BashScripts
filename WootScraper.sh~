#!/bin/bash
function GetPageReturnFile()
{
#this function gets a webpage and echoes the name of the file that holds the desired text
    Webpage=`mktemp`
    wget ${1} -O ${Webpage} -q
    echo ${Webpage}
}
function GivePageReturnDescription()
{
    OutputText=`grep "<h2 class="fn">" ${1} | sed 's/<[^>]*//g' `
    echo ${OutputText}
}
function GivePageReturnPrice()
{
    OutputText=`grep "<h3 class="price">" ${1} | sed 's/<[^>]*//g' `
    echo ${OutputText}
}
function GivePageReturnCondition()
{
    OutputText=`grep "<dt>Condition:" ${1} -A 2 | tr -d "\n" | sed 's/<[^>]*//g' `
    echo ${OutputText}
}
function GivePageReturnTechnicalDescription()
{
    OutputText=`grep "<title>" ${1} | sed 's/<title>//' | sed 's/<\/title>//' `
    echo ${OutputText}
}


function GivePageAndWebsiteReturnImage()
{
    Webpage=${1}
    case ${2} in  #key off website name to determine how to parse for image
        "http://www.steepandcheap.com") 
            OutputText=`grep "item_image" ${Webpage} | sed 's/<div id=\"item_image\"><img src=\"//' | sed 's/".*//' `;;
        "http://www.whiskeymilitia.com"|"http://www.chainlove.com"|"http://www.bonktown.com")
            OutputText=`grep "mainimage" ${Webpage} | sed 's/<img name=\"mainimage\" src=\"//' | sed 's/".*//' `;;
    esac
    Image=`mktemp`
    wget ${OutputText} -O ${Image} -q
    echo ${Image}
}

#--------------------------
# BEGIN MAIN PART OF SCRIPT
#--------------------------

Woot=$(GetPageReturnFile http://www.woot.com )
